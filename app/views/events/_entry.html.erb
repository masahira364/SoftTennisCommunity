<% if event.team_id == current_user.team_id %>
	<% if event.entry_by?(current_user) %>
		<%= link_to "やっぱり不参加", event_entries_path(event.id), method: :delete, remote: true, class: "btn btn-primary btn-block" %>
	<% else %>
		<%= link_to "参加する", event_entries_path(event.id), method: :post, remote: true, class: "btn btn-primary btn-block" %>
	<% end %>

<% else %>

	<% if @event.team.approvals.pluck(:user_id).include?(current_user.id) %>
		<%= form_with model:event.team.approvals, url: approval_path(event.team_id), method: :delete do |f| %>
			<%= f.hidden_field :team_id, :value => event.team_id %>
			<%= f.hidden_field :event_id, :value => event.id %>
			<%= f.hidden_field :action, :value => 'entry' %>
			<%= f.submit "申請の取り消し", class: "btn btn-primary btn-block" %>
		<% end %>
	<% else %>
		<%= form_with model:event.team.approvals, url: team_approvals_path(event.team_id) do |f| %>
			<%= f.hidden_field :team_id, :value => event.team_id %>
			<%= f.hidden_field :event_id, :value => event.id %>
			<%= f.hidden_field :action, :value => 'entry' %>
			<%= f.submit "予定参加の申請", class: "btn btn-primary btn-block" %>
		<% end %>
	<% end %>
<% end %>